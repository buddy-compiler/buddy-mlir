set(LLVM_CodeGen_DIR ${LLVM_MAIN_SRC_DIR}/lib/CodeGen)

add_llvm_component_library(LLVMBuddyCodeGen
  ${LLVM_CodeGen_DIR}/AggressiveAntiDepBreaker.cpp
  ${LLVM_CodeGen_DIR}/AllocationOrder.cpp
  ${LLVM_CodeGen_DIR}/Analysis.cpp
  ${LLVM_CodeGen_DIR}/AssignmentTrackingAnalysis.cpp
  ${LLVM_CodeGen_DIR}/AtomicExpandPass.cpp
  ${LLVM_CodeGen_DIR}/BasicBlockPathCloning.cpp
  ${LLVM_CodeGen_DIR}/BasicBlockSections.cpp
  ${LLVM_CodeGen_DIR}/BasicBlockSectionsProfileReader.cpp
  ${LLVM_CodeGen_DIR}/BasicTargetTransformInfo.cpp
  ${LLVM_CodeGen_DIR}/BranchFolding.cpp
  ${LLVM_CodeGen_DIR}/BranchRelaxation.cpp
  ${LLVM_CodeGen_DIR}/BreakFalseDeps.cpp
  ${LLVM_CodeGen_DIR}/CalcSpillWeights.cpp
  ${LLVM_CodeGen_DIR}/CallBrPrepare.cpp
  ${LLVM_CodeGen_DIR}/CallingConvLower.cpp
  ${LLVM_CodeGen_DIR}/CFGuardLongjmp.cpp
  ${LLVM_CodeGen_DIR}/CFIFixup.cpp
  ${LLVM_CodeGen_DIR}/CFIInstrInserter.cpp
  ${LLVM_CodeGen_DIR}/CodeGenCommonISel.cpp
  ${LLVM_CodeGen_DIR}/CodeGen.cpp
  ${LLVM_CodeGen_DIR}/CodeGenPrepare.cpp
  ${LLVM_CodeGen_DIR}/CodeGenTargetMachineImpl.cpp
  ${LLVM_CodeGen_DIR}/CommandFlags.cpp
  ${LLVM_CodeGen_DIR}/ComplexDeinterleavingPass.cpp
  ${LLVM_CodeGen_DIR}/CriticalAntiDepBreaker.cpp
  ${LLVM_CodeGen_DIR}/DeadMachineInstructionElim.cpp
  ${LLVM_CodeGen_DIR}/DetectDeadLanes.cpp
  ${LLVM_CodeGen_DIR}/DFAPacketizer.cpp
  ${LLVM_CodeGen_DIR}/DwarfEHPrepare.cpp
  ${LLVM_CodeGen_DIR}/EarlyIfConversion.cpp
  ${LLVM_CodeGen_DIR}/EdgeBundles.cpp
  ${LLVM_CodeGen_DIR}/EHContGuardCatchret.cpp
  ${LLVM_CodeGen_DIR}/ExecutionDomainFix.cpp
  ${LLVM_CodeGen_DIR}/ExpandLargeDivRem.cpp
  ${LLVM_CodeGen_DIR}/ExpandLargeFpConvert.cpp
  ${LLVM_CodeGen_DIR}/ExpandMemCmp.cpp
  ${LLVM_CodeGen_DIR}/ExpandPostRAPseudos.cpp
  ${LLVM_CodeGen_DIR}/ExpandReductions.cpp
  ${LLVM_CodeGen_DIR}/ExpandVectorPredication.cpp
  ${LLVM_CodeGen_DIR}/FaultMaps.cpp
  ${LLVM_CodeGen_DIR}/FEntryInserter.cpp
  ${LLVM_CodeGen_DIR}/FinalizeISel.cpp
  ${LLVM_CodeGen_DIR}/FixupStatepointCallerSaved.cpp
  ${LLVM_CodeGen_DIR}/FuncletLayout.cpp
  ${LLVM_CodeGen_DIR}/GCEmptyBasicBlocks.cpp
  ${LLVM_CodeGen_DIR}/GCMetadata.cpp
  ${LLVM_CodeGen_DIR}/GCRootLowering.cpp
  ${LLVM_CodeGen_DIR}/GlobalMerge.cpp
  ${LLVM_CodeGen_DIR}/IfConversion.cpp
  ${LLVM_CodeGen_DIR}/InlineSpiller.cpp
  ${LLVM_CodeGen_DIR}/InterleavedAccessPass.cpp
  ${LLVM_CodeGen_DIR}/InterleavedLoadCombinePass.cpp
  ${LLVM_CodeGen_DIR}/JMCInstrumenter.cpp
  ${LLVM_CodeGen_DIR}/KCFI.cpp
  ${LLVM_CodeGen_DIR}/LatencyPriorityQueue.cpp
  ${LLVM_CodeGen_DIR}/LiveDebugVariables.cpp
  ${LLVM_CodeGen_DIR}/LiveIntervalCalc.cpp
  ${LLVM_CodeGen_DIR}/LiveInterval.cpp
  ${LLVM_CodeGen_DIR}/LiveIntervals.cpp
  ${LLVM_CodeGen_DIR}/LivePhysRegs.cpp
  ${LLVM_CodeGen_DIR}/LiveRangeCalc.cpp
  ${LLVM_CodeGen_DIR}/LiveRangeEdit.cpp
  ${LLVM_CodeGen_DIR}/LiveRangeShrink.cpp
  ${LLVM_CodeGen_DIR}/LiveRegMatrix.cpp
  ${LLVM_CodeGen_DIR}/LiveRegUnits.cpp
  ${LLVM_CodeGen_DIR}/LiveStacks.cpp
  ${LLVM_CodeGen_DIR}/LiveVariables.cpp
  ${LLVM_CodeGen_DIR}/LocalStackSlotAllocation.cpp
  ${LLVM_CodeGen_DIR}/LowerEmuTLS.cpp
  ${LLVM_CodeGen_DIR}/MacroFusion.cpp
  ${LLVM_CodeGen_DIR}/MachineBasicBlock.cpp
  ${LLVM_CodeGen_DIR}/MachineBlockFrequencyInfo.cpp
  ${LLVM_CodeGen_DIR}/MachineBlockPlacement.cpp
  ${LLVM_CodeGen_DIR}/MachineCSE.cpp
  ${LLVM_CodeGen_DIR}/MachineCheckDebugify.cpp
  ${LLVM_CodeGen_DIR}/MachineCombiner.cpp
  ${LLVM_CodeGen_DIR}/MachineConvergenceVerifier.cpp
  ${LLVM_CodeGen_DIR}/MachineCopyPropagation.cpp
  ${LLVM_CodeGen_DIR}/MachineCycleAnalysis.cpp
  ${LLVM_CodeGen_DIR}/MachineDominanceFrontier.cpp
  ${LLVM_CodeGen_DIR}/MachineDominators.cpp
  ${LLVM_CodeGen_DIR}/MachineDomTreeUpdater.cpp
  ${LLVM_CodeGen_DIR}/MachineFrameInfo.cpp
  ${LLVM_CodeGen_DIR}/MachineFunctionAnalysis.cpp
  ${LLVM_CodeGen_DIR}/MachineFunction.cpp
  ${LLVM_CodeGen_DIR}/MachineFunctionPass.cpp
  ${LLVM_CodeGen_DIR}/MachineFunctionPrinterPass.cpp
  ${LLVM_CodeGen_DIR}/MachineFunctionSplitter.cpp
  ${LLVM_CodeGen_DIR}/MachineInstr.cpp
  ${LLVM_CodeGen_DIR}/MachineInstrBundle.cpp
  ${LLVM_CodeGen_DIR}/MachineLateInstrsCleanup.cpp
  ${LLVM_CodeGen_DIR}/MachineLoopInfo.cpp
  ${LLVM_CodeGen_DIR}/MachineLoopUtils.cpp
  ${LLVM_CodeGen_DIR}/MachineModuleInfo.cpp
  ${LLVM_CodeGen_DIR}/MachineModuleInfoImpls.cpp
  ${LLVM_CodeGen_DIR}/MachineModuleSlotTracker.cpp
  ${LLVM_CodeGen_DIR}/MachineOptimizationRemarkEmitter.cpp
  ${LLVM_CodeGen_DIR}/MachineOutliner.cpp
  ${LLVM_CodeGen_DIR}/MachinePipeliner.cpp
  ${LLVM_CodeGen_DIR}/MachinePostDominators.cpp
  ${LLVM_CodeGen_DIR}/MachineRegisterInfo.cpp
  ${LLVM_CodeGen_DIR}/MachineSSAContext.cpp
  ${LLVM_CodeGen_DIR}/MachineScheduler.cpp
  ${LLVM_CodeGen_DIR}/MachineSink.cpp
  ${LLVM_CodeGen_DIR}/MachineStableHash.cpp
  ${LLVM_CodeGen_DIR}/MachineSSAUpdater.cpp
  ${LLVM_CodeGen_DIR}/MachineStripDebug.cpp
  ${LLVM_CodeGen_DIR}/MachineTraceMetrics.cpp
  ${LLVM_CodeGen_DIR}/MachineUniformityAnalysis.cpp
  ${LLVM_CodeGen_DIR}/MachineVerifier.cpp
  ${LLVM_CodeGen_DIR}/MachineModuleInfo.cpp
  ${LLVM_CodeGen_DIR}/MIRFSDiscriminator.cpp
  ${LLVM_CodeGen_DIR}/MIRPrinter.cpp
  ${LLVM_CodeGen_DIR}/MIRSampleProfile.cpp
  ${LLVM_CodeGen_DIR}/MIRVRegNamerUtils.cpp
  ${LLVM_CodeGen_DIR}/MIRYamlMapping.cpp
  ${LLVM_CodeGen_DIR}/MachineOutliner.cpp



  ${GeneratedMLSources}

  ${LLVM_CodeGen_DIR}/LiveDebugValues/LiveDebugValues.cpp
  ${LLVM_CodeGen_DIR}/LiveDebugValues/VarLocBasedImpl.cpp
  ${LLVM_CodeGen_DIR}/LiveDebugValues/InstrRefBasedImpl.cpp

  ADDITIONAL_HEADER_DIRS
  ${LLVM_MAIN_INCLUDE_DIR}/llvm/CodeGen
  ${LLVM_MAIN_INCLUDE_DIR}/llvm/CodeGen/PBQP

  LINK_LIBS ${LLVM_PTHREAD_LIB} ${MLLinkDeps}

  DEPENDS
  buddy_intrinsics_gen
  ${MLDeps}

  LINK_COMPONENTS
  BuddyAnalysis
  BuddyBitReader
  BuddyBitWriter
  BuddyCore
  MC
  ObjCARC
  BuddyProfileData
  BuddyScalar
  Support
  BuddyTarget
  BuddyTransformUtils

  )

add_subdirectory(SelectionDAG)
add_subdirectory(AsmPrinter)
add_subdirectory(MIRParser)
